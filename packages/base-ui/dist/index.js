var V={applicationPath:"/",emailAllowOnlyAscii:!0,responsiveDialogs:!0,bootstrapMessages:!1,rootNamespaces:["Serenity"],notLoggedInHandler:null};typeof document!="undefined"&&(I=document.querySelector("link#ApplicationPath"),I!=null&&(V.applicationPath=I.getAttribute("href")));var I,B=class extends Array{bw(t,n){return[[this,">=",t],"and",[this,"<=",n]]}contains(t){return[this,"like","%"+t+"%"]}endsWith(t){return[this,"like","%"+t]}eq(t){return[this,"=",t]}gt(t){return[this,">",t]}ge(t){return[this,">=",t]}in(t){return[this,"in",[t]]}isNull(){return["is null",this]}isNotNull(){return["is not null",this]}le(t){return[this,"<=",t]}lt(t){return[this,"<",t]}ne(t){return[this,"!=",t]}like(t){return[this,"like",t]}startsWith(t){return[this,"like",t+"%"]}notIn(t){return[this,"not in",[t]]}notLike(t){return[this,"not like",t]}},$=1,g=2,M=3,E=4,v=function(t,n,e){this.expression=t,this.error=n,this.position=e,this.toString=function(){return'Error parsing expression: "'+t+'", "'+n+", position: "+e}};function X(t){var n,e,r=[],a=t.length,i=t.length-1,c=0,o,l;function h(){for(;o<a;){if(l=t.charAt(o),l===" "||l==="	"){o++;continue}break}}function y(){n=o;for(var f=!1;n++<i;)if(l=t.charAt(n),l==="'")if(n<i&&t.charAt(n+1)==="'"){n++,f=!0;continue}else break;if(n===o||t.charAt(n)!=="'")throw new v(t,"unterminated string",o);e=t.substr(o+1,n-o-1),f&&(e=e.replace(/''/g,"'"))}function w(){n=o;for(var f=!1;n<i&&(l=t.charAt(n+1),l>="0"&&l<="9"||!f&&l===".");)l==="."&&(f=!0),n++;e=parseFloat(t.substring(o,n+1))}function b(){for(n=o;n<i&&(l=t.charAt(n+1),l=="_"||l>="A"&&l<="Z"||l>="a"&&l<="z"||l>="0"&&l<="9");)n++;e=t.substr(o,n-o+1)}function k(){if(o++,b(),!e.length)throw new v(t,"expected parameter name",o)}function C(){if(h(),o>=a||t.charAt(o)!="("){if(o<a&&t.charAt(o)=="@"){k(),o=n;return}throw new v(t,"expected parenthesis",o)}o++;let f=[];for(;;){if(h(),o>=a)throw new v(t,"expected parenthesis",o);if(l=t.charAt(o),l==","){if(f.length==0)throw new v(t,"unexpected comma",o);o++,h(),l=t.charAt(o)}else{if(l==")")break;if(f.length>0)throw new v(t,"expected comma",o)}if(l==="'"){y(),f.push(e),o=n+1;continue}if(l>="0"&&l<="9"){w(),f.push(e),o=n+1;continue}if(l=="n"&&(b(),e==="null")){f.push(null),o=n+1;continue}throw new v(t,"unexpected token",o)}e=f}for(o=0;o<a;o++)if(l=t.charAt(o),!(l===" "||l==="	")){if(l=="_"||l>="A"&&l<="Z"||l>="a"&&l<="z"){b();var s=e.toLowerCase();if(s=="is")if(o=n+1,h(),b(),s=e.toLowerCase(),s==="not")if(o=n+1,h(),b(),e.toLowerCase()==="null")r.push({t:g,v:"is not null"});else throw new v(t,'expected "null"',o);else if(s==="null")r.push({t:g,v:"is null"});else throw new v(t,'expected "null" or "not" keyword',o);else if(s==="and"||s==="or"||s==="xor")r.push({t:g,v:s});else if(s==="not"){let f=n;o=n+1,h(),b(),s=e.toLowerCase(),s==="in"?(o=n+1,r.push({t:g,v:"not in"}),C(),typeof e=="string"?r.push({t:E,v:e}):r.push({t:M,v:e})):s==="like"?(r.push({t:g,v:"not like"}),o=n):(r.push({t:g,v:"not"}),o=f);continue}else if(s==="in"){r.push({t:g,v:"in"}),o=n+1,C(),typeof e=="string"?r.push({t:E,v:e}):r.push({t:M,v:e});continue}else s==="like"?r.push({t:g,v:"like"}):r.push({t:$,v:e});o=n;continue}if(l==="@"){k(),r.push({t:E,v:e}),o=n;continue}if((l==="-"||l==="+")&&o<i&&t.charAt(o+1)>="0"&&t.charAt(o+1)<="9"||l>="0"&&l<="9"){n=o,w(),r.push({t:M,v:e}),o=n;continue}if(l==="'"){n=o,y(),r.push({t:M,v:e}),o=n;continue}if(l==="="){r.push({t:g,v:l});continue}if(l==="("){c++,r.push({t:g,v:l});continue}if(l==")"){if(c<=0)throw new v(t,"unexpected parenthesis",o);c--,r.push({t:g,v:l});continue}if(l===">"||l==="<"){o<i&&t.charAt(o+1)==="="?(r.push({t:g,v:l+"="}),o++):r.push({t:g,v:l});continue}throw new v(t,"unknown token",o)}if(c>0)throw new v(t,"missing parenthesis",o);return r}var F={"=":4,">":4,"<":4,">=":4,"<=":4,"<>":4,"!=":4,like:5,"not like":5,in:5,"not in":5,"is null":5,"is not null":5,not:6,and:7,xor:8,or:9};function tt(t){var n=[],e=[];for(var r of t)if(r.t===g){var a=F[r.v];if(a!=null){for(;e.length;){var i=e[e.length-1];if(i.t!==g||i.v=="(")break;var c=F[i.v];if(c==null||c>a)break;n.push(e.pop())}e.push(r)}else if(r.v==="(")e.push(r);else if(r.v===")"){for(;e.length&&(e[e.length-1].t!==g||e[e.length-1].v!=="(");)n.push(e.pop());e.pop()}else n.push(r)}else n.push(r);for(;e.length;){var o=e.pop();if(o.t==g&&(o.v==="("||o.v===")"))throw"Mismatched parentheses in criteria expression!";n.push(o)}return n}function et(t,n){var e=[];for(var r of t)switch(r.t){case $:{e.push([r.v]);break}case M:{e.push(Array.isArray(r.v)?[r.v]:r.v);break}case E:{if(!n)throw new Error("getParam must be passed for parameterized expressions!");var a=n(r.v);e.push(Array.isArray(a)?[a]:a);break}case g:{switch(r.v){case"not":case"is null":case"is not null":if(!e.length)throw new Error("Unary operator "+r.v+" requires a value!");e.push([r.v,e.pop()]);break;default:if(e.length<2)throw new Error("Binary operator "+r.v+" requires two values!");var i=e.pop(),c=e.pop();e.push([c,r.v,i]);break}break}default:throw new Error("Invalid operator type: "+r.t+"!")}if(e.length!=1)throw new Error("Error evaluating expression!");return e.pop()}function j(t,n){var e=X(t),r=tt(e);return et(r,n)}function nt(t,...n){if(!(t!=null&&t.length))return[];if(typeof t=="string")return j(t,n==null||n[0]==null?null:r=>n[0][r]);if(!n.length)return j(t.join(""));var e=String.raw({raw:t},...n.map((r,a)=>"@__"+a));return j(e,r=>r.startsWith("__")?n[parseInt(r.substring(2),10)]:void 0)}var R=(t=>(t.paren="()",t.not="not",t.isNull="is null",t.isNotNull="is not null",t.exists="exists",t.and="and",t.or="or",t.xor="xor",t.eq="=",t.ne="!=",t.gt=">",t.ge=">=",t.lt="<",t.le="<=",t.in="in",t.notIn="not in",t.like="like",t.notLike="not like",t))(R||{});function m(t){var n=B.of(t);return!n.eq&&(n.__proto__=B.prototype),n}m.and=function(t,n,...e){var r=m.join(t,"and",n);if(e)for(let a of e)r=m.join(r,"and",a);return r};m.Operator=R;m.isEmpty=function(t){return t==null||t.length===0||t.length===1&&typeof t[0]=="string"&&t[0].length===0};m.join=function(t,n,e){return m.isEmpty(t)?e:m.isEmpty(e)?t:[t,n,e]};m.not=function(t){return["not",t]};m.or=function(t,n,...e){var r=m.join(t,"or",n);if(e)for(let a of e)r=m.join(r,"or",a);return r};m.paren=function(t){return m.isEmpty(t)?t:["()",t]};m.parse=nt;var rt={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","&":"&amp;"};function at(t){return rt[t]}function P(t){return t==null?"":(typeof t!="string"&&(t=""+t),t.replace(/[<>"'&]/g,at))}function O(t,n,e){if(!(n==null||!n.length)){if(n.indexOf(" ")<0){t.classList.toggle(n,e);return}var r=n.split(" ").map(i=>i.trim()).filter(i=>i.length);for(var a of r)t.classList.toggle(a,e)}}var x=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||typeof global!="undefined"&&global||{};function Y(t){x.Serenity||(x.Serenity={});let n=x.Serenity.__stateStore;if(n||(x.Serenity.__stateStore=n=Object.create(null)),t==null)return n;var e=n[t];return e==null&&(n[t]=e=Object.create(null)),e}function J(){return Y("__types")}function ot(t){return Object.prototype.hasOwnProperty.call(t,"__typeName")&&t.__typeName||void 0}function it(t,n){Object.defineProperty(t,"__typeName",{value:n,configurable:!0})}function lt(t,n){if(!t||!n)return(t||n||[]).slice();function e(r){return r.filter((a,i)=>r.indexOf(a)===i)}return e(t.concat(n))}function st(t,n,e){var r;let a=J();n?(it(t,n),a[n]=t):(r=ot(t))!=null&&r.length&&(a[t.__typeName]=t),e!=null&&e.length&&Object.defineProperty(t,"__interfaces",{value:lt(t.__interfaces,e),configurable:!0})}function ut(t,n,e){if(st(t,n,void 0),e&&e!=n){let r=J();r[e]||(r[e]=t)}Object.defineProperty(t,"__interface",{value:null,configurable:!0})}var z;(t=>(t.toString=(n,e)=>{var r;if(e==null)return"";if(typeof e!="number")return""+e;var a=n;if(e===0||!((r=n.__metadata)!=null&&r.enumFlags)){for(var i in a)if(a[i]===e)return i;return e==null?"":e.toString()}else{var c=[];for(var i in a)typeof a[i]=="number"&&a[i]&e&&(c.push(i),e-=a[i]);return e!=0&&c.push(e.toString()),c.join(" | ")}},t.getValues=n=>{var e=[],r=n;for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&typeof r[a]=="number"&&e.push(r[a]);return e}))(z||(z={}));var bt=new Proxy({},{get:(t,n)=>n});function ct(){return Y("__localText")}function G(t,n){if(!t)return;let e=ct();if(typeof t=="string"){e[t]=n;return}n!=null||(n="");for(let r of Object.keys(t)){let a=n+r,i=t[r];typeof i=="object"?G(i,a+"."):e[a]=i}}(x.Serenity||(x.Serenity={})).addLocalText=G;var Q,U,q;typeof jQuery!="undefined"&&(U=(Q=jQuery.fn)==null?void 0:Q.button)!=null&&U.noConflict&&(q=jQuery.ui)!=null&&q.button&&(jQuery.fn.btn=jQuery.fn.button.noConflict());var dt={tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",showDuration:300,onShown:()=>{},hideDuration:1e3,onHidden:()=>{},closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!0,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,rtl:!1,onCloseClick:()=>{},closeButton:!1,onclick:()=>{}},L=null,pt=class{constructor(t){this.toastId=0,this.previousToast=null;var n;this.options=Object.assign(Object.assign({},(n=L==null?void 0:L.options)!=null?n:dt),t)}getContainer(t,n=!1){var e,r,a;let i=document.getElementById((e=t==null?void 0:t.containerId)!=null?e:this.options.containerId);if(i||!n)return i;i=document.createElement("div"),i.setAttribute("id",this.options.containerId);let c=(r=t==null?void 0:t.positionClass)!=null?r:this.options.positionClass;c&&O(i,c,!0);let o=(a=t==null?void 0:t.target)!=null?a:this.options.target,l=document.querySelector(o);return l&&l.appendChild(i),i}error(t,n,e){return this.notify({type:"error",iconClass:"toast-error",message:t,title:n},e)}warning(t,n,e){return this.notify({type:"warning",iconClass:"toast-warning",message:t,title:n},e)}success(t,n,e){return this.notify({type:"success",iconClass:"toast-success",message:t,title:n},e)}info(t,n,e){return this.notify({type:"info",iconClass:"toast-info",message:t,title:n},e)}subscribe(t){this.listener=t}publish(t){this.listener&&this.listener(t)}removeContainerIfEmpty(t){let n=this.getContainer(t);n&&!n.hasChildNodes()&&n.parentNode&&n.parentNode.removeChild(n)}removeToast(t,n){var e;t&&t!==document.activeElement&&((e=t.parentNode)==null||e.removeChild(t),this.previousToast=null,this.removeContainerIfEmpty(n))}clear(t){let n=this.getContainer(t);if(!n)return;let e=Array.from(n.childNodes);for(let r=e.length-1;r>=0;r-=1)this.removeToast(e[r],t);this.removeContainerIfEmpty()}notify(t,n){if(n=Object.assign(Object.assign(Object.assign({},this.options),t),n),((p,d)=>{if(p.preventDuplicates){if(d.message===this.previousToast)return!0;this.previousToast=d.message||""}return!1})(n,t))return null;this.toastId+=1;var e=this.getContainer(n,!0);let r=null,a=document.createElement("div"),i=document.createElement("div"),c=document.createElement("div"),o=document.createElement("div");o.innerHTML=n.closeHtml.trim();let l=o.firstChild,h={toastId:this.toastId,state:"visible",startTime:new Date,endTime:void 0,opt:n,map:t},y=(p=null)=>{a===document.activeElement&&!p||(this.removeToast(a),r&&clearTimeout(r),n.onHidden&&h.state!=="hidden"&&n.onHidden(),h.state="hidden",h.endTime=new Date,this.publish(h))},w=()=>{let p="";switch(n.iconClass){case"toast-success":case"toast-info":p="polite";break;default:p="assertive"}a.setAttribute("aria-live",p)},b=()=>{(n.timeOut>0||n.extendedTimeOut>0)&&(r=setTimeout(y,n.extendedTimeOut))},k=()=>{r&&clearTimeout(r)},C=()=>{n.closeOnHover&&(a.addEventListener("mouseover",()=>k()),a.addEventListener("mouseout",()=>b())),!n.onclick&&n.tapToDismiss&&a.addEventListener("click",y),n.closeButton&&l&&l.addEventListener("click",p=>{p.stopPropagation(),n.onCloseClick&&n.onCloseClick(p),y(!0)}),n.onclick&&a.addEventListener("click",p=>{n.onclick&&n.onclick(p),n.tapToDismiss&&y()})},s=()=>{if(t.title){let p=t.title;n.escapeHtml&&(p=P(t.title)),i.innerHTML=p,O(i,n.titleClass,!0),a.appendChild(i)}},f=()=>{if(t.message){let p=t.message;n.escapeHtml&&(p=P(t.message)),c.innerHTML=p,O(c,n.messageClass,!0),a.appendChild(c)}},T=()=>{n.closeButton&&l&&(O(l,n.closeClass,!0),l.setAttribute("role","button"),a.insertBefore(l,a.firstChild))},N=()=>{n.newestOnTop?e.insertBefore(a,e.firstChild):e.appendChild(a)},A=()=>{n.onShown&&n.onShown(),n.timeOut>0&&(r=setTimeout(y,n.timeOut))};return a.classList.add("show"),n.rtl&&a.classList.add("rtl"),n.toastClass&&O(a,n.toastClass,!0),n.iconClass&&O(a,n.iconClass,!0),s(),f(),T(),N(),w(),A(),C(),this.publish(h),a}};L=new pt;var _={decimalSeparator:".",groupSeparator:",",decimalDigits:2,negativeSign:"-",positiveSign:"+",percentSymbol:"%",currencySymbol:"$",dateSeparator:"/",dateOrder:"mdy",dateFormat:"MM/dd/yyyy",dateTimeFormat:"MM/dd/yyyy HH:mm:ss",amDesignator:"AM",pmDesignator:"PM",timeSeparator:":",firstDayOfWeek:0,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],minimizedDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],stringCompare:(t,n)=>t<n?-1:t>n?1:0};function ft(t){var n={};for(let e=0;e<t.length;e++)n[t.charAt(e)]=e+1;return function(e,r){if(e=e||"",r=r||"",e==r)return 0;let a;for(let i=0,c=Math.min(e.length,r.length);i<c;i++){let o=e.charAt(i),l=r.charAt(i);if(o===l)continue;let h=n[o],y=n[l];if(h!=null&&y!=null)return h<y?-1:1;if(a=o.localeCompare(l),a!=0)return a}return a!=null?a:e.localeCompare(r)}}var u={decimalSeparator:".",groupSeparator:",",dateSeparator:"/",dateOrder:"dmy",dateFormat:"dd/MM/yyyy",dateTimeFormat:"dd/MM/yyyy HH:mm:ss",stringCompare:ft("AaBbCc\xC7\xE7FfGg\u011E\u011FHhI\u0131\u0130iJjKkLlMmNnOo\xD6\xF6PpRrSs\u015E\u015FTtUu\xDC\xFCVvYyZz")};(function(){var t,n,e;let r;for(r in _)u[r]===void 0&&Object.prototype.hasOwnProperty.call(_,r)&&(u[r]=_[r]);if(typeof document!="undefined"&&(e=r=(n=(t=document.querySelector("script#ScriptCulture"))==null?void 0:t.textContent)==null?void 0:n.trim())!=null&&e.length){var a=JSON.parse(r);a.DecimalSeparator!=null&&(u.decimalSeparator=a.DecimalSeparator),a.GroupSeparator!=null&&a.GroupSeparator!=u.decimalSeparator?u.groupSeparator=a.GroupSeparator:u.groupSeparator==u.decimalSeparator&&(u.groupSeparator=u.decimalSeparator=="."?",":"."),delete a.GroupSeparator,delete a.DecimalSeparator;for(r in a)u[r]===void 0&&Object.prototype.hasOwnProperty.call(a,r)&&(u[r.charAt(0).toLowerCase()+r.substring(1)]=a[r])}})();var ht=/'.*?[^\\]'|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|\//g;function H(t,n,e){var r,a,i,c,o,l,h,y,w,b,k,C;if(!t)return"";let s;if(typeof t=="string"){if(s=D(t,e==null?void 0:e.dateOrder),!s)return"";if(isNaN(s.valueOf()))return t}else s=t;if(n=="i")return s.toString();if(n=="id")return s.toDateString();if(n=="it")return s.toTimeString();if(e==null&&(e=u),n==null||n=="d")n=(r=e.dateFormat)!=null?r:u.dateFormat;else if(n.length==1)switch(n){case"g":n=((a=e.dateTimeFormat)!=null?a:u.dateTimeFormat).replace(":ss","");break;case"G":n=(i=e.dateTimeFormat)!=null?i:u.dateTimeFormat;break;case"s":n="yyyy-MM-ddTHH:mm:ss";break;case"t":n=e.dateTimeFormat&&e.dateFormat?e.dateTimeFormat.replace(e.dateFormat+" ",""):"HH:mm";break;case"u":case"U":n=n=="u"?"yyyy-MM-ddTHH:mm:ss.fffZ":(c=e.dateTimeFormat)!=null?c:u.dateTimeFormat,s=new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds());break}n.charAt(0)=="%"&&(n=n.substring(1));var f=ht,T=[];for(f.lastIndex=0;;){var N=f.lastIndex,A=f.exec(n);if(T.push(n.slice(N,A?A.index:n.length)),!A)break;var p=A[0],d=p,S;switch(p){case"/":d=(o=e.dateSeparator)!=null?o:u.dateSeparator;break;case"dddd":d=((l=e.dayNames)!=null?l:u.dayNames)[s.getDay()];break;case"ddd":d=((h=e.shortDayNames)!=null?h:u.shortDayNames)[s.getDay()];break;case"dd":d=s.getDate().toString().padStart(2,"0");break;case"d":d=s.getDate().toString();break;case"MMMM":d=((y=e.monthNames)!=null?y:u.monthNames)[s.getMonth()];break;case"MMM":d=((w=e.shortMonthNames)!=null?w:u.shortMonthNames)[s.getMonth()];break;case"MM":d=(s.getMonth()+1).toString().padStart(2,"0");break;case"M":d=(s.getMonth()+1).toString();break;case"yyyy":d=s.getFullYear().toString().padStart(4,"0");break;case"yy":d=(s.getFullYear()%100).toString().padStart(2,"0");break;case"y":d=(s.getFullYear()%100).toString();break;case"h":case"hh":S=s.getHours()%12,S?(d=S.toString(),p=="hh"&&(d=d.padStart(2,"0"))):d="12";break;case"HH":d=s.getHours().toString().padStart(2,"0");break;case"H":d=s.getHours().toString();break;case"mm":d=s.getMinutes().toString().padStart(2,"0");break;case"m":d=s.getMinutes().toString();break;case"ss":d=s.getSeconds().toString().padStart(2,"0");break;case"s":d=s.getSeconds().toString();break;case"t":case"tt":d=s.getHours()<12?(b=e.amDesignator)!=null?b:u.amDesignator:(k=e.pmDesignator)!=null?k:u.pmDesignator,p=="t"&&(d=d.charAt(0));break;case"fff":d=s.getMilliseconds().toString().padStart(3,"0");break;case"ff":d=s.getMilliseconds().toString().padStart(3,"0").substring(0,2);break;case"f":d=s.getMilliseconds().toString().padStart(3,"0").charAt(0);break;case"z":S=s.getTimezoneOffset()/60,d=(S>=0?"-":"+")+Math.floor(Math.abs(S));break;case"zz":case"zzz":S=s.getTimezoneOffset()/60,d=(S>=0?"-":"+")+Math.floor(Math.abs(S)).toString().padStart(2,"0"),p=="zzz"&&(d+=((C=e.timeSeparator)!=null?C:u.timeSeparator)+Math.abs(s.getTimezoneOffset()%60).toString().padStart(2,"0"));break;default:d.charAt(0)=="'"&&(d=d.substring(1,d.length-1).replace(/\\'/g,"'"));break}T.push(d)}return T.join("")}var gt=/(\d{4,})(?:-(\d{1,2})(?:-(\d{1,2})(?:[T ](\d{1,2}):(\d{1,2})(?::(\d{1,2})(?:\.(\d+))?)?(?:(Z)|([+-])(\d{1,2})(?::(\d{1,2}))?)?)?)?)?/;function W(t){return t==null||(typeof t!="string"&&(t=t+""),!t.length)?null:gt.test(t)?new Date(t+(t.length==10?"T00:00:00":"")):new Date(NaN)}function D(t,n){if(!t||!t.length||(t=t.trim(),!t.length))return null;if(t.length>=10&&t.charAt(4)==="-"&&t.charAt(7)==="-"&&(t.length===10||t.length>10&&t.charAt(10)==="T"))return W(t);if(t.indexOf(" ")>0&&t.indexOf(":")>t.indexOf(" ")+1){var e=D(t.substring(0,t.indexOf(" ")));return!e||isNaN(e.valueOf())?new Date(NaN):W(H(e,"yyyy-MM-dd")+"T"+t.substring(t.indexOf(" ")+1).trim())}let r,a,i,c=mt(t);if(c.length==3){if(c.some(o=>!/^[0-9]+$/.test(o)))return new Date(NaN);switch(n=n||u.dateOrder,n){case"dmy":r=parseInt(c[0],10),a=parseInt(c[1],10)-1,i=parseInt(c[2],10);break;case"ymd":r=parseInt(c[2],10),a=parseInt(c[1],10)-1,i=parseInt(c[0],10);break;case"mdy":default:r=parseInt(c[1],10),a=parseInt(c[0],10)-1,i=parseInt(c[2],10);break}if(isNaN(r)||isNaN(a)||isNaN(i)||r<1||r>31||a<0||a>11||i>9999||i<0)return new Date(NaN);if(i<100){let o=new Date().getFullYear(),l=o%100+10;i+=o-o%100+(i<=l?0:-100)}return new Date(i,a,r)}else if(c.length==1)try{return new Date(c[0])}catch(o){return new Date(NaN)}return new Date(NaN)}function mt(t){return t=t==null?void 0:t.trim(),t!=null&&t.length?t.indexOf("/")>=0?t.split("/"):t.indexOf(".")>=0?t.split("."):t.indexOf("-")>=0?t.split("-"):t.indexOf("\\")>=0?t.split("\\"):[t]:null}var K=(t=>(t[t.Disabled=-1]="Disabled",t[t.None=0]="None",t[t.Sum=1]="Sum",t[t.Avg=2]="Avg",t[t.Min=3]="Min",t[t.Max=4]="Max",t))(K||{});ut(K,"Serenity.SummaryType");var yt=(t=>(t[t.List=0]="List",t[t.KeyOnly=1]="KeyOnly",t[t.Details=2]="Details",t[t.None=3]="None",t[t.IdOnly=4]="IdOnly",t[t.Lookup=5]="Lookup",t))(yt||{}),vt=(t=>(t[t.details=0]="details",t[t.keyOnly=1]="keyOnly",t[t.list=2]="list",t[t.none=3]="none",t[t.idOnly=4]="idOnly",t[t.lookup=5]="lookup",t))(vt||{});var Z='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 17 17"><g></g><path d="M14 2v-1h-3v1h-5v-1h-3v1h-3v15h17v-15h-3zM12 2h1v2h-1v-2zM4 2h1v2h-1v-2zM16 16h-15v-8.921h15v8.921zM1 6.079v-3.079h2v2h3v-2h5v2h3v-2h2v3.079h-15z" fill="currentColor"></path></svg>';function At(t){var a,i;if(u.dateOrder==="dmy"){var n=t.target;if((n==null?void 0:n.getAttribute("type"))!=="date"){var e=(a=n.value)!=null?a:"";if(e.length>=6&&/^[0-9]*$/g.test(e)&&(n.value=e.substring(0,2)+u.dateSeparator+e.substring(2,2)+u.dateSeparator+e.substring(4)),e=(i=n.value)!=null?i:"",e.length>=5){var r=D(e);r&&!isNaN(r.valueOf())&&(n.value=H(r,null))}}}}function Ot(t){var a;if(u.dateOrder!=="dmy")return;var n=t.target;if((n==null?void 0:n.getAttribute("type"))=="date"||n.getAttribute("readonly")!=null||n.getAttribute("disabled")!=null)return;var e=(a=n.value)!=null?a:"";if(e.length===0||n.selectionEnd!==e.length)return;if(e.indexOf(u.dateSeparator+u.dateSeparator)!==-1){n.value=e.split(u.dateSeparator+u.dateSeparator).join(u.dateSeparator);return}function r(i){return i>="0"&&i<="9"}if(t.which===47||t.which===111){if(e.length>=2&&e.charAt(e.length-1)===u.dateSeparator&&e.charAt(e.length-2)===u.dateSeparator){n.value=e.substring(0,e.length-1);return}if(e.charAt(e.length-1)!==u.dateSeparator)return;switch(e.length){case 2:if(r(e.charAt(0))){e="0"+e;break}else return;case 4:if(r(e.charAt(0))&&r(e.charAt(2))&&e.charAt(1)==u.dateSeparator){e="0"+e.charAt(0)+u.dateSeparator+"0"+e.charAt(2)+u.dateSeparator;break}else return;case 5:if(r(e.charAt(0))&&r(e.charAt(2))&&r(e.charAt(3))&&e.charAt(1)===u.dateSeparator){e="0"+e;break}else if(r(e.charAt(0))&&r(e.charAt(1))&&r(e.charAt(3))&&e.charAt(2)===u.dateSeparator){e=e.charAt(0)+e.charAt(1)+u.dateSeparator+"0"+e.charAt(3)+u.dateSeparator;break}else break;default:return}n.value=e}if(e.length<6&&(t.which>=48&&t.which<=57||t.which>=96&&t.which<=105)&&r(e.charAt(e.length-1))){switch(e.length){case 1:if(e.charCodeAt(0)<=51)return;e="0"+e;break;case 2:if(!r(e.charAt(0)))return;break;case 3:if(!r(e.charAt(0))||e.charAt(1)!==u.dateSeparator||e.charCodeAt(2)<=49)return;e="0"+e.charAt(0)+u.dateSeparator+"0"+e.charAt(2);break;case 4:if(e.charAt(1)==u.dateSeparator){if(!r(e.charAt(0))||!r(e.charAt(2)))return;e="0"+e;break}else if(e.charAt(2)==u.dateSeparator){if(!r(e.charAt(0))||!r(e.charAt(1))||e.charCodeAt(3)<=49)return;e=e.charAt(0)+e.charAt(1)+u.dateSeparator+"0"+e.charAt(3);break}else return;case 5:if(e.charAt(2)!==u.dateSeparator||!r(e.charAt(0))||!r(e.charAt(1))||!r(e.charAt(3)))return;break;default:return}n.value=e+u.dateSeparator}}function xt(t){return{clickOpens:!0,allowInput:!0,dateFormat:u.dateOrder.split("").join(u.dateSeparator).replace("y","Y"),onChange:t}}function Tt(t){var n=document.createElement("i");return n.classList.add("ui-datepicker-trigger"),n.innerHTML=Z,n.addEventListener("click",()=>{var e,r;t.classList.contains("readonly")||(r=(e=t._flatpickr)==null?void 0:e.open)==null||r.call(e)}),n}function Mt(t,n){let e=t==null?void 0:t.closest(".ui-dialog");if(e){var r=parseInt(getComputedStyle(e).zIndex,10);r==null||isNaN(r)||setTimeout(()=>{let a=n(t).datepicker("widget");if(!a.length)return;let i=parseInt(a.css("z-index"));!isNaN(i)&&i<=r&&a.css("z-index",r+1)},0)}}function Et(t){var a,i;if(!((i=(a=t==null?void 0:t.datepicker)==null?void 0:a.regional)!=null&&i.en))return!1;let n=u.dateOrder,e=u.dateSeparator,r=typeof document=="undefined"?"en":(document.documentElement.lang||"en").toLowerCase();return t.datepicker.regional[r]||(r=r.split("-")[0],t.datepicker.regional[r]&&(r="en")),t.datepicker.setDefaults(t.datepicker.regional.en),t.datepicker.setDefaults(t.datepicker.regional[r]),t.datepicker.setDefaults({dateFormat:n=="mdy"?"mm"+e+"dd"+e+"yy":n=="ymd"?"yy"+e+"mm"+e+"dd":"dd"+e+"mm"+e+"yy",buttonImage:"data:image/svg+xml,"+encodeURIComponent(Z),buttonImageOnly:!0,showOn:"both",showButtonPanel:!0,changeMonth:!0,changeYear:!0}),t.ui&&t.ui.version<="1.12.1"&&t.datepicker.setDefaults({buttonImage:null,buttonImageOnly:!1,buttonText:'<i class="fa fa-calendar"></i>'}),!0}export{At as dateInputChangeHandler,Ot as dateInputKeyupHandler,Z as datePickerIconSvg,xt as flatPickrOptions,Tt as flatPickrTrigger,Et as jQueryDatepickerInitialization,Mt as jQueryDatepickerZIndexWorkaround};
//# sourceMappingURL=index.js.map
