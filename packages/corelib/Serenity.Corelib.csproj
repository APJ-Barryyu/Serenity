<Project Sdk="Microsoft.NET.Sdk.Razor">
  <PropertyGroup>
    <Description>NuGet version of @serenity-is/corelib NPM package</Description>
  </PropertyGroup>
  <ItemGroup>
    <TypingsToPackage Include="wwwroot\index.global.d.ts" PackagePath="typings\serenity.corelib\index.d.ts" />
    <TSBuildInputs Include="..\*\src\**\*.ts;..\*\tsconfig.json;..\*\build\build.js;..\*\rollup.config.js;..\*\package.json" />
  </ItemGroup>
  <Target Name="TSBuild" Condition="'$(SkipNodeScripts)' != 'true'" AfterTargets="AfterBuild" Inputs="@(TSBuildInputs)" DependsOnTargets="NpmInstall"
      Outputs="dist\index.d.ts;dist\index.js;dist\index.js.map;
               wwwroot\index.global.d.ts;wwwroot\index.global.js;wwwroot\index.global.js.map;
               wwwroot\index.global.min.js;wwwroot\index.global.min.js.map;
               ..\..\src\Serenity.Assets\wwwroot\Scripts\SlickGrid\slick.grid.js;
               ..\..\src\Serenity.Assets\wwwroot\Scripts\SlickGrid\slick.core.js">
    <Exec Command="pnpm -r build" WorkingDirectory="..\..\packages" />
  </Target>
</Project>